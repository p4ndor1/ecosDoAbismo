<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="page-category" content="biblioteca"> <title>Biblioteca Proibida // ECOS DO ABISMO</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Jacquard+12&family=VT323&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <header class="main-header border-double">
        <div class="header-meta"><span>VOL. 666</span><span>LIB.SYS</span></div>
        <h1 class="glitch-title"><a href="../index.html" style="color:inherit; text-decoration:none;">Ecos do Abismo</a></h1>
        <div class="header-meta"><span>SAO.PAULO</span><span>[REC]</span></div>
    </header>

    <nav class="main-nav border-simple">
        <a href="../index.html" class="nav-item">:: INÍCIO</a>
        <div class="nav-item dropdown">
            <a href="biblioteca.html" class="dropbtn" style="background-color:var(--bg-color); color:var(--main-color)">:: BIBLIOTECA</a>
            <div class="dropdown-content">
                <a href="livros.html">Livros Malditos</a>
                <a href="filmes.html">Filmes de Terror</a>
                <a href="jogos.html">Jogos Obscuros</a>
            </div>
        </div>
        <a href="crimes.html" class="nav-item">:: CRIMES REAIS</a>
        <a href="darkweb.html" class="nav-item">:: DARK WEB</a>
        <a href="assombracoes.html" class="nav-item">:: ASSOMBRAÇÕES</a>
    </nav>

    <main class="main-content">
        
        <aside class="sidebar border-simple">
            <div class="ad-placeholder">
                <span>[ ESPAÇO PUBLICITÁRIO ]</span>
                <small>Google Adsense</small>
            </div>
            
            <div id="recent-posts-sidebar" style="margin: 20px 0;"></div>

            <div class="ad-placeholder skyscraper">
                <span>[ ESPAÇO PUBLICITÁRIO ]</span>
                <small>Vertical</small>
            </div>
        </aside>

        <div class="library-content-wrapper" style="width: 100%; overflow: hidden;">
            
            <header class="hub-hero" style="background-image: url('../img/biblioteca/hero-bg.png'); background-color: #111;">
                <div class="hub-overlay">
                    <h1 class="hub-title">BIBLIOTECA PROIBIDA</h1>
                    <p class="hub-desc">Conhecimento amaldiçoado em todas as suas formas. Obras que desafiam a sanidade.</p>
                </div>
            </header>

            <section id="livros" class="carousel-section">
                <div class="carousel-header">
                    <h2 class="gothic-sub">Livros Malditos</h2>
                    <a href="livros.html" class="btn-retro is-small">VER TODOS >></a>
                </div>
                <div class="carousel-container" id="carousel-livros">
                    <p class="terminal-text">Carregando tomos...</p>
                </div>
            </section>

            <section id="filmes" class="carousel-section">
                <div class="carousel-header">
                    <h2 class="gothic-sub">Filmes de Terror</h2>
                    <a href="filmes.html" class="btn-retro is-small">VER TODOS >></a>
                </div>
                <div class="carousel-container" id="carousel-filmes">
                    <p class="terminal-text">Carregando fitas...</p>
                </div>
            </section>

            <section id="jogos" class="carousel-section">
                <div class="carousel-header">
                    <h2 class="gothic-sub">Jogos Obscuros</h2>
                    <a href="jogos.html" class="btn-retro is-small">VER TODOS >></a>
                </div>
                <div class="carousel-container" id="carousel-jogos">
                    <p class="terminal-text">Carregando cartuchos...</p>

    <footer class="main-footer border-double">
        <div class="footer-logo">ECOS_DO_ABISMO © 2025</div>
    </footer>

    <script src="../db.js"></script>
    <script src="../db.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // 1. Função Molde: Cria o HTML de um card
            const criarCardLib = (post) => `
                <div class="lib-card">
                    <div class="lib-img-box">
                        <img src="${post.imagem}" onerror="this.style.display='none'" alt="${post.titulo}">
                    </div>
                    <h4>${post.titulo}</h4>
                    <a href="${post.link}">ACESSAR</a>
                </div>
            `;

            // 2. Função Genérica: Preenche qualquer carrossel
            function preencherCarrossel(categoria, idElemento) {
                // Filtra o banco de dados pela categoria (ex: 'filmes')
                const lista = postsDatabase.filter(p => p.categoria === categoria);
                const container = document.getElementById(idElemento);

                // Se achou itens, desenha os cards. Se não, avisa.
                if (lista.length > 0) {
                    container.innerHTML = lista.map(criarCardLib).join('');
                } else {
                    container.innerHTML = "<p class='terminal-text'>Dados corrompidos ou inexistentes neste setor.</p>";
                }
            }

            // 3. Executar para as 3 categorias
            // (Certifique-se que no db.js as categorias são 'livros', 'filmes', 'jogos')
            preencherCarrossel('livros', 'carousel-livros');
            preencherCarrossel('filmes', 'carousel-filmes');
            preencherCarrossel('jogos', 'carousel-jogos');
        });
    </script>
</body>
</html>
</body>
</html>